{"componentChunkName":"component---src-templates-blog-post-js","path":"/2023/11/laravel-static-code-analysis-dengan-phpstan/","result":{"data":{"site":{"siteMetadata":{"title":"Dev Jurnal","author":"mmdmthr","siteUrl":"https://mmdmthr.github.io","comment":{"disqusShortName":"","utterances":"mmdmthr/devjurnal"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"eb00adad-bdd2-5bc0-ac84-85c9ee544967","excerpt":"Analisis kode statis adalah metode evaluasi program dengan memeriksa kode sebelum dieksekusi. Ini dilakukan dengan memeriksa set kode berdasarkan sejumlah aturan penulisan kode (type variable, return value, dsb). Analisis statis dijalankan sebelum pengujian perangkat lunak…","html":"<p>Analisis kode statis adalah metode evaluasi program dengan memeriksa kode sebelum dieksekusi. Ini dilakukan dengan memeriksa set kode berdasarkan sejumlah aturan penulisan kode (type variable, return value, dsb). Analisis statis dijalankan sebelum pengujian perangkat lunak dimulai. Proses ini dilakukan untuk menjamin bahwa kode yang kita kirim untuk diuji sesuai dengan standar kualitas tertinggi. Ini juga memberikan umpan balik otomatis sehingga para pengembang akan mengetahui masalah-masalah tersebut lebih awal, yang membuatnya lebih mudah dan lebih murah untuk memperbaiki masalah tersebut.</p>\n<h3 id=\"apa-yang-dibawa-phpstan\" style=\"position:relative;\"><a href=\"#apa-yang-dibawa-phpstan\" aria-label=\"apa yang dibawa phpstan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Apa yang Dibawa PHPStan?</h3>\n<p>Ketika pertama kali melihat repositori PHPStan, ada klaim yang kontroversial…</p>\n<blockquote>\n<p>“PHPStan berfokus pada menemukan kesalahan dalam kode Anda tanpa benar-benar menjalankannya. Ini menangkap seluruh kelas bug bahkan sebelum Anda menulis tes untuk kode tersebut. Ini memindahkan PHP lebih dekat ke bahasa yang dikompilasi dalam arti bahwa kebenaran setiap baris kode dapat diperiksa sebelum Anda menjalankan baris tersebut sebenarnya.”</p>\n</blockquote>\n<p>PHPStan memiliki banyak level aturan, dan seperti yang dapat Anda lihat, semakin tinggi tingkat yang kita pilih, semakin banyak kesalahan yang kita dapatkan. Sekarang pertanyaannya, tingkat mana yang harus kita pilih? Nah, pertama-tama kita perlu tahu apa aturan dari setiap tingkat.</p>\n<h4 id=\"tingkat-aturan\" style=\"position:relative;\"><a href=\"#tingkat-aturan\" aria-label=\"tingkat aturan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tingkat Aturan</h4>\n<table>\n<thead>\n<tr>\n<th>Tingkat</th>\n<th>Nama</th>\n<th>Detail</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>00</td>\n<td><em>Basic Checks</em></td>\n<td>Memeriksa kelas-kelas, fungsi atau method yang tidak ditemukan yang dipanggil pada $this, jumlah argumen yang salah yang dimasukkan ke method dan fungsi tersebut, variabel yang selalu tidak terdefinisi.</td>\n</tr>\n<tr>\n<td>01</td>\n<td>$this <em>Unknowns</em></td>\n<td>Variabel yang mungkin tidak terdefinisi, method dan properti ajaib yang tidak diketahui pada kelas dengan method __call dan __get.</td>\n</tr>\n<tr>\n<td>02</td>\n<td><em>Methods</em></td>\n<td>Method yang tidak diketahui diperiksa pada semua ekspresi (bukan hanya $this), memvalidasi PHPDocs.</td>\n</tr>\n<tr>\n<td>03</td>\n<td><em>Types</em></td>\n<td>Memeriksa tipe return, tipe yang ditugaskan ke properti.</td>\n</tr>\n<tr>\n<td>04</td>\n<td><em>Dead Code</em></td>\n<td>Pemeriksaan dasar kode yang sudah tidak terpakai - selalu false instanceof dan pemeriksaan tipe lainnya, if else mati, kode yang tidak terjangkau setelah return; dll.</td>\n</tr>\n<tr>\n<td>05</td>\n<td><em>Arguments</em></td>\n<td>Memeriksa tipe argumen yang dimasukkan sebagai parameter pada method dan fungsi.</td>\n</tr>\n<tr>\n<td>06</td>\n<td><em>Type Hints</em></td>\n<td>Melaporkan kurangnya petunjuk tipe (argument atau return value).</td>\n</tr>\n<tr>\n<td>07</td>\n<td><em>Union Types</em></td>\n<td>Melaporkan sebagian salahnya tipe gabungan, jika Anda memanggil metode yang hanya ada pada beberapa tipe dalam tipe gabungan, level 7 mulai melaporkan hal tersebut.</td>\n</tr>\n<tr>\n<td>08</td>\n<td><em>Nullable Types</em></td>\n<td>Melaporkan panggilan metode dan akses ke properti pada tipe yang dapat bernilai null.</td>\n</tr>\n<tr>\n<td>09</td>\n<td><em>Mixed Type</em></td>\n<td>Menjadi sangat ketat tentang tipe campuran, satu-satunya operasi yang diizinkan yang dapat Anda lakukan dengannya adalah meneruskannya ke tipe campuran lainnya.</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"berkas-konfigurasi\" style=\"position:relative;\"><a href=\"#berkas-konfigurasi\" aria-label=\"berkas konfigurasi permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Berkas Konfigurasi</h4>\n<p>PHPStan menggunakan berkas konfigurasi, phpstan.neon atau phpstan.neon.dist, yang memungkinkan Anda:</p>\n<ul>\n<li>Mendefinisikan path yang akan dianalisis.</li>\n<li>Menetapkan tingkat aturan.</li>\n<li>Mengecualikan path.</li>\n<li>Menyertakan ekstensi PHPStan.</li>\n<li>Mengabaikan kesalahan.</li>\n<li>Menentukan jumlah maksimum proses paralel.</li>\n</ul>\n<p>Berikut adalah contoh berkas konfigurasi sederhana yang secara default berada di direktori root aplikasi Anda, tetapi Anda dapat mempelajari lebih lanjut dari <a href=\"https://phpstan.org/config-reference\">referensi konfigurasi</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">includes</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> ./vendor/nunomaduro/larastan/extension.neon\n\n<span class=\"token key atrule\">parameters</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token key atrule\">paths</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> app\n        <span class=\"token punctuation\">-</span> config\n        <span class=\"token punctuation\">-</span> database\n        <span class=\"token punctuation\">-</span> routes\n\n    <span class=\"token comment\"># Tingkat 9 adalah tingkat tertinggi</span>\n    <span class=\"token key atrule\">level</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span>\n\n    <span class=\"token key atrule\">ignoreErrors</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token string\">'#PHPDoc tag @var#'</span>\n\n    <span class=\"token key atrule\">parallel</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">maximumNumberOfProcesses</span><span class=\"token punctuation\">:</span> <span class=\"token number\">4</span>\n\n    <span class=\"token key atrule\">noUnnecessaryCollectionCall</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\n    <span class=\"token key atrule\">checkMissingIterableValueType</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></code></pre></div>\n<h4 id=\"mengabaikan-kesalahan\" style=\"position:relative;\"><a href=\"#mengabaikan-kesalahan\" aria-label=\"mengabaikan kesalahan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Mengabaikan Kesalahan</h4>\n<p>Kemungkinan besar, Anda akan perlu mengabaikan beberapa kesalahan yang untungnya diizinkan dengan dua cara berbeda:</p>\n<ol>\n<li>\n<p>Secara langsung menggunakan tag PHPDoc</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/** @phpstan-ignore-next-line */</span>\n    <span class=\"token keyword\">echo</span> <span class=\"token variable\">$foo</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">echo</span> <span class=\"token variable\">$bar</span> <span class=\"token comment\">/** @phpstan-ignore-line */</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>Dari berkas konfigurasi dan ini sebenarnya lebih bersih</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">parameters</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token key atrule\">ignoreErrors</span><span class=\"token punctuation\">:</span>\n\n        <span class=\"token punctuation\">-</span>\n            <span class=\"token key atrule\">message</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Access to an undefined property [a-zA-Z0-9\\_]+::\\$foo'</span>\n            <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> some/dir/someFile.php\n        <span class=\"token punctuation\">-</span>\n            <span class=\"token key atrule\">message</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'#Call to an undefined method [a-zA-Z0-9\\_]+::doFoo()#'</span>\n            <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> other/dir/DifferentFile.php\n            <span class=\"token key atrule\">count</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span> <span class=\"token comment\"># opsional, dan itu akan mengabaikan dua kemunculan pertama kesalahan</span>\n      <span class=\"token punctuation\">-</span>\n            <span class=\"token key atrule\">message</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'#Call to an undefined method [a-zA-Z0-9\\_]+::doBar()#'</span>\n            <span class=\"token key atrule\">paths</span><span class=\"token punctuation\">:</span>\n                <span class=\"token punctuation\">-</span> some/dir/*\n                <span class=\"token punctuation\">-</span> other/dir/*</code></pre></div>\n</li>\n</ol>\n<p>Selengkapnya bisa dibaca di documentasi <a href=\"https://phpstan.org/user-guide/getting-started\">https://phpstan.org/user-guide/getting-started</a></p>","frontmatter":{"title":"Static Code Analysis dengan PHPStan","date":"November 25, 2023"}}},"pageContext":{"slug":"/2023/11/laravel-static-code-analysis-dengan-phpstan/","previous":{"fields":{"slug":"/2023/10/stuck-di-karir/"},"frontmatter":{"title":"Stuck di Karir"}},"next":{"fields":{"slug":"/2023/12/docker-compose/"},"frontmatter":{"title":"Apa itu Docker Compose?"}}}},"staticQueryHashes":["2486386679","3128451518"]}