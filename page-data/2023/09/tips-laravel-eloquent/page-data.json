{"componentChunkName":"component---src-templates-blog-post-js","path":"/2023/09/tips-laravel-eloquent/","result":{"data":{"site":{"siteMetadata":{"title":"Dev Jurnal","author":"mmdmthr","siteUrl":"https://mmdmthr.github.io","comment":{"disqusShortName":"","utterances":"mmdmthr/devjurnal"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"683c1726-5d56-57aa-b6f7-dba94746a6ac","excerpt":"Saat kita menggunakan framework Laravel, ORM Eloquent terlihat seperti mekanisme sederhana, semuanya begitu mudah dilakukan. Tetapi sebenarnya di balik layar, ada banyak fungsi semi-tersembunyi dan cara-cara yang tidak banyak diketahui untuk mencapai lebih banyak dengan itu.…","html":"<p>Saat kita menggunakan framework Laravel, ORM Eloquent terlihat seperti mekanisme sederhana, semuanya begitu mudah dilakukan. Tetapi sebenarnya di balik layar, ada banyak fungsi semi-tersembunyi dan cara-cara yang tidak banyak diketahui untuk mencapai lebih banyak dengan itu.</p>\n<h3 id=\"1-increment-dan-decrement\" style=\"position:relative;\"><a href=\"#1-increment-dan-decrement\" aria-label=\"1 increment dan decrement permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. <em>Increment</em> dan <em>Decrement</em></h3>\n<p>Daripada melakukan ini:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$article</span> <span class=\"token operator\">=</span> <span class=\"token class-name static-context\">Article</span><span class=\"token operator\">::</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$article_id</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$article</span><span class=\"token operator\">-></span><span class=\"token property\">read_count</span><span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$article</span><span class=\"token operator\">-></span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Kita bisa melakukan ini:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$article</span> <span class=\"token operator\">=</span> <span class=\"token class-name static-context\">Article</span><span class=\"token operator\">::</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$article_id</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$article</span><span class=\"token operator\">-></span><span class=\"token function\">increment</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'read_count'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Ini juga akan berfungsi:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token class-name static-context\">Article</span><span class=\"token operator\">::</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$article_id</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">increment</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'read_count'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name static-context\">Article</span><span class=\"token operator\">::</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$article_id</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">increment</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'read_count'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// +10</span>\n<span class=\"token class-name static-context\">Product</span><span class=\"token operator\">::</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$produce_id</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">decrement</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'stock'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// -1</span></code></pre></div>\n<h3 id=\"2-method-x-or-y\" style=\"position:relative;\"><a href=\"#2-method-x-or-y\" aria-label=\"2 method x or y permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Method X or Y</h3>\n<p>Eloquent memiliki beberapa fungsi yang menggabungkan dua method, seperti “tolong lakukan X, jika tidak lakukan Y”.</p>\n<p>Contoh 1 - <code class=\"language-text\">findOrFail()</code></p>\n<p>Daripada:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$user</span> <span class=\"token operator\">=</span> <span class=\"token class-name static-context\">User</span><span class=\"token operator\">::</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token variable\">$user</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token function\">abort</span> <span class=\"token punctuation\">(</span><span class=\"token number\">404</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span></code></pre></div>\n<p>Lakukan ini:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$user</span> <span class=\"token operator\">=</span> <span class=\"token class-name static-context\">User</span><span class=\"token operator\">::</span><span class=\"token function\">findOrFail</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Contoh 2 - <code class=\"language-text\">firstOrCreate()</code></p>\n<p>Daripada:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$user</span> <span class=\"token operator\">=</span> <span class=\"token class-name static-context\">User</span><span class=\"token operator\">::</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'email'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$email</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">first</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token variable\">$user</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token class-name static-context\">User</span><span class=\"token operator\">::</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token string single-quoted-string\">'email'</span> <span class=\"token operator\">=></span> <span class=\"token variable\">$email</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Lakukan ini saja:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$user</span> <span class=\"token operator\">=</span> <span class=\"token class-name static-context\">User</span><span class=\"token operator\">::</span><span class=\"token function\">firstOrCreate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'email'</span> <span class=\"token operator\">=></span> <span class=\"token variable\">$email</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"3-method-boot-pada-model\" style=\"position:relative;\"><a href=\"#3-method-boot-pada-model\" aria-label=\"3 method boot pada model permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Method boot() pada Model</h3>\n<p>Ada tempat ajaib bernama <code class=\"language-text\">boot()</code> dalam model Eloquent di mana Kita dapat mengganti perilaku default:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">User</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Model</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">boot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword static-context\">parent</span><span class=\"token operator\">::</span><span class=\"token function\">boot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword static-context\">static</span><span class=\"token operator\">::</span><span class=\"token function\">updating</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$model</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// lakukan beberapa logging</span>\n            <span class=\"token comment\">// ganti beberapa properti seperti $model->something = transform($something);</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Mungkin salah satu contoh yang paling populer adalah mengatur nilai atribut tertentu pada saat membuat objek model. Katakanlah Kita ingin membuat atribut UUID pada saat itu.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">boot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token keyword static-context\">parent</span><span class=\"token operator\">::</span><span class=\"token function\">boot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword static-context\">self</span><span class=\"token operator\">::</span><span class=\"token function\">creating</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$model</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$model</span><span class=\"token operator\">-></span><span class=\"token property\">uuid</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword type-casting\">string</span><span class=\"token punctuation\">)</span><span class=\"token class-name static-context\">Uuid</span><span class=\"token operator\">::</span><span class=\"token function\">generate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"4-relasi-dengan-kondisi-dan-pengurutan\" style=\"position:relative;\"><a href=\"#4-relasi-dengan-kondisi-dan-pengurutan\" aria-label=\"4 relasi dengan kondisi dan pengurutan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. Relasi dengan kondisi dan pengurutan</h3>\n<p>Ini adalah cara khas untuk mendefinisikan hubungan:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">users</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token function\">hasMany</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'App\\User'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Tetapi tahukah Kita bahwa pada titik ini kita sudah dapat menambahkan <code class=\"language-text\">where</code> atau <code class=\"language-text\">orderBy</code>? Misalnya, jika Kita ingin relasi tertentu untuk beberapa jenis pengguna, juga diurutkan berdasarkan email, Kita dapat melakukan ini:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">approvedUsers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token function\">hasMany</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'App\\User'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'approved'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">orderBy</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'email'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"5-properti-model-timestamps-appends-dll\" style=\"position:relative;\"><a href=\"#5-properti-model-timestamps-appends-dll\" aria-label=\"5 properti model timestamps appends dll permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. Properti Model: timestamps, appends, dll.</h3>\n<p>Ada beberapa “parameter” dari model Eloquent, dalam bentuk properti dari kelas itu. Yang paling populer mungkin adalah ini:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">User</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Model</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token variable\">$table</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'users'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token variable\">$fillable</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'email'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'password'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// field mana yang booleh diisi pada saat membuat record dengan User::create()</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token variable\">$dates</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'created_at'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'deleted_at'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// field mana yang akan dikonversi menjadi Carbon</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token variable\">$appends</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'field1'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'field2'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// nilai tambahan yang dikembalikan dalam JSON</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Dan masih ada yang lain:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">protected</span> <span class=\"token variable\">$primaryKey</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'uuid'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// tidak harus \"id\"</span>\n<span class=\"token keyword\">public</span> <span class=\"token variable\">$incrementing</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// bahkan tidak harus otomatis bertambah!</span>\n<span class=\"token keyword\">protected</span> <span class=\"token variable\">$perPage</span> <span class=\"token operator\">=</span> <span class=\"token number\">25</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Kita dapat mengganti jumlah halaman PER MODEL (default 15)</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">CREATED_AT</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'created_at'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">UPDATED_AT</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'updated_at'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// bahkan nama-nama kolom itu dapat diganti</span>\n<span class=\"token keyword\">public</span> <span class=\"token variable\">$timestamps</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// atau bahkan tidak digunakan sama sekali</span></code></pre></div>\n<p>Dan masih ada lagi, di sini hanya dicantumkan yang paling menarik, untuk lebih banyak silakan cek kode class Model abstrak default dan cek semua trait yang digunakan.</p>\n<h3 id=\"6-temukan-beberapa-entri\" style=\"position:relative;\"><a href=\"#6-temukan-beberapa-entri\" aria-label=\"6 temukan beberapa entri permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. Temukan beberapa entri</h3>\n<p>Semua orang tahu method <code class=\"language-text\">find()</code>, bukan?</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$user</span> <span class=\"token operator\">=</span> <span class=\"token class-name static-context\">User</span><span class=\"token operator\">::</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Namun tidak banyajk orang yang tahu bahwa itu bisa menerima beberapa ID sebagai array:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$users</span> <span class=\"token operator\">=</span> <span class=\"token class-name static-context\">User</span><span class=\"token operator\">::</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"7-where-x\" style=\"position:relative;\"><a href=\"#7-where-x\" aria-label=\"7 where x permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7. Where X</h3>\n<p>Ada cara elegan untuk mengubah ini:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$users</span> <span class=\"token operator\">=</span> <span class=\"token class-name static-context\">User</span><span class=\"token operator\">::</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'approved'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Menjadi ini:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$users</span> <span class=\"token operator\">=</span> <span class=\"token class-name static-context\">User</span><span class=\"token operator\">::</span><span class=\"token function\">whereApproved</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Kita dapat mengganti nama field apa pun dan menambahkannya sebagai sufiks ke “where” dan itu akan berfungsi secara otomatis.</p>\n<p>Selain itu, ada beberapa method yang telah ditentukan sebelumnya dalam Eloquent, yang terkait dengan tanggal/waktu:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token class-name static-context\">User</span><span class=\"token operator\">::</span><span class=\"token function\">whereDate</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'created_at'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Y-m-d'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name static-context\">User</span><span class=\"token operator\">::</span><span class=\"token function\">whereDay</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'created_at'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'d'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name static-context\">User</span><span class=\"token operator\">::</span><span class=\"token function\">whereMonth</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'created_at'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'m'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name static-context\">User</span><span class=\"token operator\">::</span><span class=\"token function\">whereYear</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'created_at'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Y'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"8-urutkan-berdasarkan-hubungan\" style=\"position:relative;\"><a href=\"#8-urutkan-berdasarkan-hubungan\" aria-label=\"8 urutkan berdasarkan hubungan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>8. Urutkan berdasarkan hubungan</h3>\n<p>Sebuah “trik” yang sedikit lebih rumit. Bagaimana jika Kita memiliki topik forum tetapi ingin mengurutkannya berdasarkan posting terbaru? Permintaan yang cukup umum di forum dengan topik yang diperbarui terbaru di bagian atas, bukan?</p>\n<p>Pertama, deskripsikan hubungan terpisah untuk posting terbaru pada topik:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">latestPost</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token function\">hasOne</span><span class=\"token punctuation\">(</span><span class=\"token class-name class-name-fully-qualified static-context\"><span class=\"token punctuation\">\\</span>App<span class=\"token punctuation\">\\</span>Post</span><span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">latest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Dan kemudian, di controller kita, kita bisa melakukan “sulap” ini:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$users</span> <span class=\"token operator\">=</span> <span class=\"token class-name static-context\">Topic</span><span class=\"token operator\">::</span><span class=\"token function\">with</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'latestPost'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">sortByDesc</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'latestPost.created_at'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"9-eloquentwhen---tidak-ada-lagi-if-else\" style=\"position:relative;\"><a href=\"#9-eloquentwhen---tidak-ada-lagi-if-else\" aria-label=\"9 eloquentwhen   tidak ada lagi if else permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>9. Eloquent::when() - tidak ada lagi if-else</h3>\n<p>Banyak dari kita menulis kueri kondisional dengan “if-else”, seperti ini:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'filter_by'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token string single-quoted-string\">'likes'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$query</span><span class=\"token operator\">-></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'likes'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'>'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'likes_amount'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'filter_by'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token string single-quoted-string\">'date'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$query</span><span class=\"token operator\">-></span><span class=\"token function\">orderBy</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'created_at'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'ordering_rule'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'desc'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Tetapi ada cara yang lebih baik - menggunakan <code class=\"language-text\">when()</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$query</span> <span class=\"token operator\">=</span> <span class=\"token class-name static-context\">Author</span><span class=\"token operator\">::</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$query</span><span class=\"token operator\">-></span><span class=\"token function\">when</span><span class=\"token punctuation\">(</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'filter_by'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token string single-quoted-string\">'likes'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$q</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$q</span><span class=\"token operator\">-></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'likes'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'>'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'likes_amount\n\n'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$query</span><span class=\"token operator\">-></span><span class=\"token function\">when</span><span class=\"token punctuation\">(</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'filter_by'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token string single-quoted-string\">'date'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$q</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$q</span><span class=\"token operator\">-></span><span class=\"token function\">orderBy</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'created_at'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'ordering_rule'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'desc'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Mungkin terasa tidak lebih pendek atau lebih elegan, tetapi yang paling kuat adalah pengiriman parameter:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$query</span> <span class=\"token operator\">=</span> <span class=\"token class-name static-context\">User</span><span class=\"token operator\">::</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$query</span><span class=\"token operator\">-></span><span class=\"token function\">when</span><span class=\"token punctuation\">(</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'role'</span><span class=\"token punctuation\">,</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$q</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$role</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$q</span><span class=\"token operator\">-></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'role_id'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$role</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$authors</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$query</span><span class=\"token operator\">-></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"10-belongsto-default-models\" style=\"position:relative;\"><a href=\"#10-belongsto-default-models\" aria-label=\"10 belongsto default models permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>10. BelongsTo Default Models</h3>\n<p>Misalkan Kita memiliki model Post yang terkait dengan Author dan kemudian kode Blade template ini:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token variable\">$post</span><span class=\"token operator\">-></span><span class=\"token property\">author</span><span class=\"token operator\">-></span><span class=\"token property\">name</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>Tetapi bagaimana jika penulisnya dihapus, atau kosong karena beberapa alasan? Kita akan mendapatkan error, seperti “properti dari objek non-objek”.</p>\n<p>Tentu saja, Kita dapat mencegahnya seperti ini:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token variable\">$post</span><span class=\"token operator\">-></span><span class=\"token property\">author</span><span class=\"token operator\">-></span><span class=\"token property\">name</span> <span class=\"token operator\">??</span> <span class=\"token string single-quoted-string\">''</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>Tetapi Kita dapat melakukannya pada method relasi di Eloquent:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">author</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token function\">belongsTo</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'App\\Author'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">withDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Dalam contoh ini, hubungan <code class=\"language-text\"></code>author()<code class=\"language-text\">akan mengembalikan model</code>App\\Author` kosong jika tidak ada penulis yang terpasang pada posting.</p>\n<p>Selain itu, kita dapat menetapkan nilai properti default untuk model default tersebut.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">author</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token function\">belongsTo</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'App\\Author'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">withDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n        <span class=\"token string single-quoted-string\">'name'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'Guest Author'</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"11-urutkan-berdasarkan-mutator\" style=\"position:relative;\"><a href=\"#11-urutkan-berdasarkan-mutator\" aria-label=\"11 urutkan berdasarkan mutator permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>11. Urutkan berdasarkan Mutator</h3>\n<p>Bayangkan Kita memiliki ini:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">function</span> <span class=\"token function-definition function\">getFullNameAttribute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">attributes</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'first_name'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">' '</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">attributes</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'last_name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Sekarang, Kita ingin mengurutkannya berdasarkan <code class=\"language-text\">full_name</code> itu? Ini tidak akan berfungsi:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$clients</span> <span class=\"token operator\">=</span> <span class=\"token class-name static-context\">Client</span><span class=\"token operator\">::</span><span class=\"token function\">orderBy</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'full_name'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// tidak berfungsi</span></code></pre></div>\n<p>Solusinya cukup sederhana. Kita perlu mengurutkan hasil setelah kita mendapatkannya.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$clients</span> <span class=\"token operator\">=</span> <span class=\"token class-name static-context\">Client</span><span class=\"token operator\">::</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">sortBy</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'full_name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// berfungsi!</span></code></pre></div>\n<p>Perhatikan bahwa nama fungsi berbeda - bukan <code class=\"language-text\">orderBy</code>, tetapi <code class=\"language-text\">sortBy</code>.</p>\n<h3 id=\"12-urutan-default-dalam-lingkup-global\" style=\"position:relative;\"><a href=\"#12-urutan-default-dalam-lingkup-global\" aria-label=\"12 urutan default dalam lingkup global permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>12. Urutan default dalam lingkup global</h3>\n<p>Bagaimana jika Kita ingin <code class=\"language-text\">User::all()</code> selalu diurutkan berdasarkan field nama? Kita dapat menetapkan lingkup global. Mari kembali ke method <code class=\"language-text\">boot()</code>, yang sudah kita sebutkan di atas.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">protected</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">boot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword static-context\">parent</span><span class=\"token operator\">::</span><span class=\"token function\">boot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n \n    <span class=\"token comment\">// Urutkan berdasarkan nama ASC</span>\n    <span class=\"token keyword static-context\">static</span><span class=\"token operator\">::</span><span class=\"token function\">addGlobalScope</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'order'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token class-name type-declaration\">Builder</span> <span class=\"token variable\">$builder</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$builder</span><span class=\"token operator\">-></span><span class=\"token function\">orderBy</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'name'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'asc'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Baca lebih lanjut tentang Query Scopes <a href=\"https://laravel.com/docs/10.x/eloquent#query-scopes\">di sini</a>.</p>\n<h3 id=\"13-method-raw-query\" style=\"position:relative;\"><a href=\"#13-method-raw-query\" aria-label=\"13 method raw query permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>13. Method raw query</h3>\n<p>Terkadang kita perlu menambahkan raw query ke Eloquent kita. Untungnya, ada fungsi untuk itu.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token comment\">// whereRaw</span>\n<span class=\"token variable\">$orders</span> <span class=\"token operator\">=</span> <span class=\"token class-name static-context\">DB</span><span class=\"token operator\">::</span><span class=\"token function\">table</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'orders'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">-></span><span class=\"token function\">whereRaw</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'price > IF(state = \"TX\", ?, 100)'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">200</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">-></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token comment\">// havingRaw</span>\n<span class=\"token class-name static-context\">Product</span><span class=\"token operator\">::</span><span class=\"token function\">groupBy</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'category_id'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">havingRaw</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'COUNT(*) > 1'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token comment\">// orderByRaw</span>\n<span class=\"token class-name static-context\">User</span><span class=\"token operator\">::</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'created_at'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'>'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'2016-01-01'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token operator\">-></span><span class=\"token function\">orderByRaw</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'(updated_at - created_at) desc'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token operator\">-></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"14-replicate-buat-salinan-dari-baris\" style=\"position:relative;\"><a href=\"#14-replicate-buat-salinan-dari-baris\" aria-label=\"14 replicate buat salinan dari baris permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>14. Replicate: buat salinan dari baris</h3>\n<p>Singkat. Tanpa penjelasan mendalam, berikut adalah cara terbaik untuk membuat salinan entri basis data:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$task</span> <span class=\"token operator\">=</span> <span class=\"token class-name static-context\">Tasks</span><span class=\"token operator\">::</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$newTask</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$task</span><span class=\"token operator\">-></span><span class=\"token function\">replicate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$newTask</span><span class=\"token operator\">-></span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"15-method-chunk-untuk-tabel-besar\" style=\"position:relative;\"><a href=\"#15-method-chunk-untuk-tabel-besar\" aria-label=\"15 method chunk untuk tabel besar permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>15. Method Chunk() untuk tabel besar</h3>\n<p>Tidak benar-benar terkait dengan Eloquent, lebih tentang Collection, tetapi ini bagus - untuk memproses dataset yang lebih besar, Kita dapat memecahnya menjadi beberapa bagian.</p>\n<p>Daripada:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$users</span> <span class=\"token operator\">=</span> <span class=\"token class-name static-context\">User</span><span class=\"token operator\">::</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$users</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$user</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Kita bisa melakukan:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token class-name static-context\">User</span><span class=\"token operator\">::</span><span class=\"token function\">chunk</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$users</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$users</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$user</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// ...</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"16-buat-controller-dan-migration-saat-membuat-model\" style=\"position:relative;\"><a href=\"#16-buat-controller-dan-migration-saat-membuat-model\" aria-label=\"16 buat controller dan migration saat membuat model permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>16. Buat controller dan migration saat membuat model</h3>\n<p>Kita semua tahu perintah Artisan ini:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">php artisan make:model Company</code></pre></div>\n<p>Tetapi tahukah Kita ada tiga flag yang berguna untuk menghasilkan file terkait dengan model tersebut?</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">php artisan make:model Company <span class=\"token parameter variable\">-mcr</span></code></pre></div>\n<ul>\n<li>-m akan membuat file migration</li>\n<li>-c akan membuat controller</li>\n<li>-r akan menunjukkan bahwa controller harus bersifat resource</li>\n</ul>\n<h3 id=\"17-timpa-updated_at-saat-menyimpan\" style=\"position:relative;\"><a href=\"#17-timpa-updated_at-saat-menyimpan\" aria-label=\"17 timpa updated_at saat menyimpan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>17. Timpa updated_at saat menyimpan</h3>\n<p>Tahukah Kita bahwa method <code class=\"language-text\">save()</code> dapat menerima parameter? Karena itu, kita dapat memberitahunya untuk “mengabaikan” fungsi default <code class=\"language-text\">updated_at</code> untuk diisi dengan tanda waktu saat ini. Lihat ini:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$product</span> <span class=\"token operator\">=</span> <span class=\"token class-name static-context\">Product</span><span class=\"token operator\">::</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$product</span><span class=\"token operator\">-></span><span class=\"token property\">updated_at</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'2019-01-01 10:00:00'</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$product</span><span class=\"token operator\">-></span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'timestamps'</span> <span class=\"token operator\">=></span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Di sini kita mengganti <code class=\"language-text\">updated_at</code> default dengan yang telah kita tentukan sebelumnya.</p>\n<h3 id=\"18-apa-hasil-dari-update\" style=\"position:relative;\"><a href=\"#18-apa-hasil-dari-update\" aria-label=\"18 apa hasil dari update permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>18. Apa hasil dari update()?</h3>\n<p>Pernahkah Kita bertanya-tanya apa yang sebenarnya dikembalikan oleh kode ini?</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$result</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$products</span><span class=\"token operator\">-></span><span class=\"token function\">whereNull</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'category_id'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'category_id'</span> <span class=\"token operator\">=></span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Pembaruan dilakukan di database, tetapi apa isi variabel <code class=\"language-text\">$result</code> itu?</p>\n<p>Jawabannya adalah baris yang terupdate. Jadi jika Kita perlu memeriksa berapa banyak baris yang terpengaruh, Kita tidak perlu memanggil method yang lain - metode <code class=\"language-text\">update()</code> akan mengembalikan jumlah ini untuk Kita.</p>\n<h3 id=\"19-ubah-kurung-menjadi-kueri-eloquent\" style=\"position:relative;\"><a href=\"#19-ubah-kurung-menjadi-kueri-eloquent\" aria-label=\"19 ubah kurung menjadi kueri eloquent permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>19. Ubah kurung menjadi kueri Eloquent</h3>\n<p>Bagaimana jika Kita memiliki campuran and-or dalam kueri SQL Kita, seperti ini:</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token keyword\">WHERE</span> <span class=\"token punctuation\">(</span>gender <span class=\"token operator\">=</span> <span class=\"token string\">'Male'</span> <span class=\"token operator\">and</span> age <span class=\"token operator\">>=</span> <span class=\"token number\">18</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">or</span> <span class=\"token punctuation\">(</span>gender <span class=\"token operator\">=</span> <span class=\"token string\">'Female'</span> <span class=\"token operator\">and</span> age <span class=\"token operator\">>=</span> <span class=\"token number\">65</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Bagaimana menerjemahkannya menjadi Eloquent? Ini adalah cara yang salah:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$q</span><span class=\"token operator\">-></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'gender'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'Male'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$q</span><span class=\"token operator\">-></span><span class=\"token function\">orWhere</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'age'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'>='</span><span class=\"token punctuation\">,</span> <span class=\"token number\">18</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$q</span><span class=\"token operator\">-></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'gender'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'Female'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$q</span><span class=\"token operator\">-></span><span class=\"token function\">orWhere</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'age'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'>='</span><span class=\"token punctuation\">,</span> <span class=\"token number\">65</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Urutannya akan salah. Cara yang benar sedikit lebih rumit, menggunakan fungsi closure sebagai sub-kueri:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$q</span><span class=\"token operator\">-></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$query</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$query</span><span class=\"token operator\">-></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'gender'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'Male'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token operator\">-></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'age'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'>='</span><span class=\"token punctuation\">,</span> <span class=\"token number\">18</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">orWhere</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$query</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$query</span><span class=\"token operator\">-></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'gender'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'Female'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token operator\">-></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'age'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'>='</span><span class=\"token punctuation\">,</span> <span class=\"token number\">65</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"20-orwhere-dengan-parameter-ganda\" style=\"position:relative;\"><a href=\"#20-orwhere-dengan-parameter-ganda\" aria-label=\"20 orwhere dengan parameter ganda permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>20. orWhere dengan parameter ganda</h3>\n<p>Terakhir, Kita dapat memasukkan parameter berupa array ke <code class=\"language-text\">orWhere()</code>.</p>\n<p>Cara “biasa”:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$q</span><span class=\"token operator\">-></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$q</span><span class=\"token operator\">-></span><span class=\"token function\">orWhere</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$q</span><span class=\"token operator\">-></span><span class=\"token function\">orWhere</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'c'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Kita bisa melakukannya seperti ini:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$q</span><span class=\"token operator\">-></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$q</span><span class=\"token operator\">-></span><span class=\"token function\">orWhere</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'b'</span> <span class=\"token operator\">=></span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'c'</span> <span class=\"token operator\">=></span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Diterjemahkan dari: <a href=\"https://laravel-news.com/eloquent-tips-tricks\">20 Laravel Eloquent Tips and Tricks | Laravel News - Povilas Korop</a></p>","frontmatter":{"title":"Tips dan Trik Laravel Eloquent","date":"September 09, 2023"}}},"pageContext":{"slug":"/2023/09/tips-laravel-eloquent/","previous":{"fields":{"slug":"/2023/09/coding-bootcamp-gratis/"},"frontmatter":{"title":"Coding Bootcamp Online Gratis"}},"next":{"fields":{"slug":"/2023/09/review-freecodecamp/"},"frontmatter":{"title":"Review Coding Bootcamp Online Gratis FreeCodeCamp"}}}},"staticQueryHashes":["2486386679","3128451518"]}