{"componentChunkName":"component---src-templates-blog-post-js","path":"/2023/05/apa-itu-oauth2-part-2-aplikasi-web-server/","result":{"data":{"site":{"siteMetadata":{"title":"Dev Jurnal","author":"mmdmthr","siteUrl":"https://mmdmthr.github.io","comment":{"disqusShortName":"","utterances":"mmdmthr/devjurnal"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"fe024fc0-37aa-5f3e-895b-a17ad359b8cb","excerpt":"Langkah pertama dalam proses OAuth2 adalah mendapatkan otorisasi dari pengguna (authorization). Pada aplikasi berbasis browser (web misalnya) atau aplikasi native mobile (Android, iOS, dsb), hal ini biasanya dilakukan dengan menampilkan antarmuka yang disediakan oleh layanan…","html":"<p>Langkah pertama dalam proses OAuth2 adalah mendapatkan otorisasi dari pengguna (<em>authorization</em>). Pada aplikasi berbasis browser (web misalnya) atau aplikasi native mobile (Android, iOS, dsb), hal ini biasanya dilakukan dengan menampilkan antarmuka yang disediakan oleh layanan kepada pengguna. </p>\n<p>OAuth2 menyediakan beberapa jenis pemberian akses (<em>grant types</em>) untuk berbagai kasus penggunaan:</p>\n<ul>\n<li><strong>Authorization Code</strong> untuk aplikasi yang berjalan di server web, aplikasi berbasis browser, dan seluler.</li>\n<li><strong>Password</strong> untuk masuk dengan nama pengguna dan kata sandi (hanya untuk aplikasi pihak pertama)</li>\n<li><strong>Client credentials</strong> untuk akses aplikasi tanpa kehadiran pengguna</li>\n<li><strong>Implicit</strong> sebelumnya direkomendasikan untuk klien tanpa client secret, tetapi telah digantikan dengan menggunakan pemberian Kode Otorisasi dengan PKCE.</li>\n</ul>\n<h2 id=\"web-server-apps\" style=\"position:relative;\"><a href=\"#web-server-apps\" aria-label=\"web server apps permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Web Server Apps</h2>\n<p>Aplikasi server web adalah jenis aplikasi paling umum saat berhadapan dengan server OAuth. Aplikasi web ditulis dalam bahasa sisi server dan dijalankan di server di mana kode sumber aplikasi tidak dapat diakses secara publik. Ini berarti aplikasi dapat menggunakan <em>client secret</em> saat berkomunikasi dengan server otorisasi, yang dapat membantu menghindari banyak vektor serangan.</p>\n<h3 id=\"authorization\" style=\"position:relative;\"><a href=\"#authorization\" aria-label=\"authorization permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Authorization</h3>\n<p>Buat link untuk ”<em>log in</em>” pengguna:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">https://authorization-server.com/auth?response_type=code&amp;\n  client_id=CLIENT_ID&amp;redirect_uri=REDIRECT_URI&amp;scope=photos&amp;state=1234zyx</code></pre></div>\n<ul>\n<li><strong><code class=\"language-text\">response_type=code</code></strong> - Menunjukkan bahwa server menghendaki untuk menerima kode otorisasi (<em>auth code</em>)</li>\n<li><strong><code class=\"language-text\">client_id</code></strong> - ID klien yang kita dapat saat pertama kali membuat aplikasi</li>\n<li><strong><code class=\"language-text\">redirect_uri</code></strong> - URI untuk mengembalikan pengguna ke aplikasi kita setelah proses otorisasi selesai</li>\n<li><strong><code class=\"language-text\">scope</code></strong> - cakupan/bagian mana dari akun pengguna yang ingin kita akses (dapat berisi satu atau beberapa)</li>\n<li><strong><code class=\"language-text\">state</code></strong> - string acak yang dibuat oleh aplikasi kita, yang akan digunakan untuk verifikasi nanti</li>\n</ul>\n<p>Pemberian Akses oleh Pengguna</p>\n<p>Pengguna melihat <em>prompt</em> otorisasi berupa antarmuka yang disediakan oleh penyedia layanan. Di proses ini aplikasi meminta persetujuan pengguna untuk mengakses sumber daya/data pengguna. Pengguna dapat mengizinkan atau menolak permintaan akses tersebut. Pengguna akan diminta <em>log in</em> terlebih dahulu jika belum.</p>\n<p><img src=\"https://aaronparecki.com/oauth-2-simplified/oauth-authorization-prompt.png\" alt=\"auth prompt\"></p>\n<p align = \"center\">\n<i>Antarmuka Pengguna untuk Prompt Otorisasi - diambil dari web aaronparecki.com</i>\n</p>\n<p>Jika pengguna mengklik “izinkan”, layanan akan mengalihkan pengguna kembali ke situs kita, dan aplikasi kita akan mendapatkan kode otorisasi.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">https://example-app.com/cb?code=AUTH_CODE_DISINI&amp;state=1234zyx</code></pre></div>\n<ul>\n<li><strong><code class=\"language-text\">code</code></strong> - Server mengembalikan kode otorisasi (auth code) dalam query string</li>\n<li><strong><code class=\"language-text\">state</code></strong> - Server mengembalikan nilai state yang sama dengan yang aplikasi kita berikan pada login URL</li>\n</ul>\n<p>Kita harus terlebih dahulu membandingkan nilai state ini untuk memastikannya sesuai dengan yang aplikasi kita buat. Kita dapat menyimpan nilai state dalam <em>cookie</em> atau <em>session</em>, dan membandingkannya saat pengguna kembali. Ini membantu memastikan titik akhir pengalihan (<em>redirection endpoint</em>) kita tidak dapat diakali untuk mencoba bertukar kode otorisasi arbitrer.</p>\n<h3 id=\"mendapatkan-token-akses\" style=\"position:relative;\"><a href=\"#mendapatkan-token-akses\" aria-label=\"mendapatkan token akses permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Mendapatkan Token Akses</h3>\n<p>Server kita perlu menukar kode otorisasi dengan token akses dengan membuat <em>http request</em> POST ke endpoint token server otorisasi:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">POST https://api.authorization-server.com/token\n  grant_type=authorization_code&amp;\n  code=AUTH_CODE_HERE&amp;\n  redirect_uri=REDIRECT_URI&amp;\n  client_id=CLIENT_ID&amp;\n  client_secret=CLIENT_SECRET</code></pre></div>\n<ul>\n<li><strong><code class=\"language-text\">grant_type=authorization_code</code></strong> - Jenis pemberian akses untuk alur ini adalah ”<em>authorization_code</em>” (kode otorisasi)</li>\n<li><strong><code class=\"language-text\">code=AUTH_CODE_HERE</code></strong> - Ini adalah kode yang kita terima dalam string kueri</li>\n<li><strong><code class=\"language-text\">redirect_uri=REDIRECT_URI</code></strong> - Harus sama dengan redirect URI yang disediakan di link asli</li>\n<li><strong><code class=\"language-text\">client_id=CLIENT_ID</code></strong> - ID klien yang kita terima saat pertama kali membuat aplikasi</li>\n<li><strong><code class=\"language-text\">client_secret=CLIENT_SECRET</code></strong> - Karena permintaan ini dibuat dari kode sisi server, <em>client secret</em> disertakan di respons (tidak akan terlihat di browser)</li>\n</ul>\n<p>Server membalas dengan token akses dan waktu kedaluwarsa</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n  \"access_token\":\"RsT5OjbzRn430zqMLgV3Ia\",\n  \"expires_in\":3600\n}</code></pre></div>\n<p>atau jika ada kesalahan</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n  \"error\":\"invalid_request\"\n}</code></pre></div>\n<p>Keamanan: Perhatikan bahwa penyedia layanan harus mewajibkan aplikasi untuk melakukan pendaftaran redirect URI sebelumnya. Ini untuk memastikan bahwa pengguna tidak dapat di-<em>redirect</em> selain menuju ke aplikasi kita.</p>\n<p><strong>Sumber</strong>: <a href=\"https://aaronparecki.com/oauth-2-simplified/\">https://aaronparecki.com/oauth-2-simplified/</a></p>","frontmatter":{"title":"Apa Itu OAuth2 part 2 - Aplikasi Web Server","date":"May 06, 2023"}}},"pageContext":{"slug":"/2023/05/apa-itu-oauth2-part-2-aplikasi-web-server/","previous":{"fields":{"slug":"/2023/04/apa-itu-oauth2-part-1/"},"frontmatter":{"title":"Apa Itu OAuth2 part 1"}},"next":{"fields":{"slug":"/2023/05/kompromi-dalam-pengembangan-perangkat-lunak/"},"frontmatter":{"title":"Kompromi dalam Pengembangan Perangkat Lunak"}}}},"staticQueryHashes":["2486386679","3128451518"]}