---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import FormattedDate from '../components/FormattedDate.astro';
import { getCollection } from 'astro:content';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';

const posts = await getCollection('blog');
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
	</head>
	<body>
		<Header />
		<main>
			<h3>Hi, I’m Hari 👋</h3>
			<p>
				I’m a software developer who builds tools that help people work better — whether it’s automating internal processes, launching MVPs, or supporting growing teams with clean and maintainable code.
			  </p>

			  <p>
				This blog is where I share thoughts on software development, tech, solo projects, and life. I also reflect on work, habits, and sustainability. You can learn more <a href="/about">about me here</a>, or check out my <a href="/id">posts in Bahasa Indonesia</a>.
			  </p>
		  
			  <h5 class="mt-10">📝 Latest Posts</h5>
			  <ul>
				{posts
				  .slice(0, 3)
				  .sort((a, b) => new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime())
				  .map((post) => (
					<li>
					  <FormattedDate date={post.data.pubDate} />
					  <a href={`/blog/${post.id}/`} class="text-blue-600 hover:underline">
						{post.data.title}
					  </a>
					</li>
				  ))}
				  <p>
					<a href="/blog" class="text-blue-600 hover:underpne">Read more posts</a>
				  </li>
			  </ul>
		</main>
		<Footer />
	</body>
</html>
