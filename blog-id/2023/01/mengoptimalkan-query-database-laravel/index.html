<!DOCTYPE html><html lang="en" class="scroll-smooth"> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="google-site-verification" content="lszFGUTWXJkJeBg2kaIvPMx225zYYrHpjv38Xxd9bck"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="sitemap" href="/sitemap-index.xml"><link rel="alternate" type="application/rss+xml" title="Dev Jurnal" href="https://mmdmthr.github.io/rss.xml"><meta name="generator" content="Astro v5.7.10"><!-- Font preloads --><link rel="preload" href="/fonts/atkinson-regular.woff" as="font" type="font/woff" crossorigin><link rel="preload" href="/fonts/atkinson-bold.woff" as="font" type="font/woff" crossorigin><!-- Canonical URL --><link rel="canonical" href="https://mmdmthr.github.io/blog-id/2023/01/mengoptimalkan-query-database-laravel/"><!-- Primary Meta Tags --><title>Mengoptimalkan Query Database di Laravel</title><meta name="title" content="Mengoptimalkan Query Database di Laravel"><meta name="description" content><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://mmdmthr.github.io/blog-id/2023/01/mengoptimalkan-query-database-laravel/"><meta property="og:title" content="Mengoptimalkan Query Database di Laravel"><meta property="og:description" content><meta property="og:image" content="https://mmdmthr.github.io/blog-placeholder-1.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://mmdmthr.github.io/blog-id/2023/01/mengoptimalkan-query-database-laravel/"><meta property="twitter:title" content="Mengoptimalkan Query Database di Laravel"><meta property="twitter:description" content><meta property="twitter:image" content="https://mmdmthr.github.io/blog-placeholder-1.jpg"><!-- GoatCounter Analytics --><script data-goatcounter="https://mmdmthr.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script><link rel="stylesheet" href="/_astro/about.B5UEq8pO.css">
<link rel="stylesheet" href="/_astro/about.CmbS3Tsx.css"><script>!(function(w,p,f,c){if(!window.crossOriginIsolated && !navigator.serviceWorker) return;c=w[p]=Object.assign(w[p]||{},{"lib":"/~partytown/","debug":false});c[f]=(c[f]||[]).concat(["dataLayer.push"])})(window,'partytown','forward');/* Partytown 0.11.0 - MIT QwikDev */
const t={preserveBehavior:!1},e=e=>{if("string"==typeof e)return[e,t];const[n,r=t]=e;return[n,{...t,...r}]},n=Object.freeze((t=>{const e=new Set;let n=[];do{Object.getOwnPropertyNames(n).forEach((t=>{"function"==typeof n[t]&&e.add(t)}))}while((n=Object.getPrototypeOf(n))!==Object.prototype);return Array.from(e)})());!function(t,r,o,i,a,s,c,l,d,p,u=t,f){function h(){f||(f=1,"/"==(c=(s.lib||"/~partytown/")+(s.debug?"debug/":""))[0]&&(d=r.querySelectorAll('script[type="text/partytown"]'),i!=t?i.dispatchEvent(new CustomEvent("pt1",{detail:t})):(l=setTimeout(v,(null==s?void 0:s.fallbackTimeout)||1e4),r.addEventListener("pt0",w),a?y(1):o.serviceWorker?o.serviceWorker.register(c+(s.swPath||"partytown-sw.js"),{scope:c}).then((function(t){t.active?y():t.installing&&t.installing.addEventListener("statechange",(function(t){"activated"==t.target.state&&y()}))}),console.error):v())))}function y(e){p=r.createElement(e?"script":"iframe"),t._pttab=Date.now(),e||(p.style.display="block",p.style.width="0",p.style.height="0",p.style.border="0",p.style.visibility="hidden",p.setAttribute("aria-hidden",!0)),p.src=c+"partytown-"+(e?"atomics.js?v=0.11.0":"sandbox-sw.html?"+t._pttab),r.querySelector(s.sandboxParent||"body").appendChild(p)}function v(n,o){for(w(),i==t&&(s.forward||[]).map((function(n){const[r]=e(n);delete t[r.split(".")[0]]})),n=0;n<d.length;n++)(o=r.createElement("script")).innerHTML=d[n].innerHTML,o.nonce=s.nonce,r.head.appendChild(o);p&&p.parentNode.removeChild(p)}function w(){clearTimeout(l)}s=t.partytown||{},i==t&&(s.forward||[]).map((function(r){const[o,{preserveBehavior:i}]=e(r);u=t,o.split(".").map((function(e,r,o){var a;u=u[o[r]]=r+1<o.length?u[o[r]]||(a=o[r+1],n.includes(a)?[]:{}):(()=>{let e=null;if(i){const{methodOrProperty:n,thisObject:r}=((t,e)=>{let n=t;for(let t=0;t<e.length-1;t+=1)n=n[e[t]];return{thisObject:n,methodOrProperty:e.length>0?n[e[e.length-1]]:void 0}})(t,o);"function"==typeof n&&(e=(...t)=>n.apply(r,...t))}return function(){let n;return e&&(n=e(arguments)),(t._ptf=t._ptf||[]).push(o,arguments),n}})()}))})),"complete"==r.readyState?h():(t.addEventListener("DOMContentLoaded",h),t.addEventListener("load",h))}(window,document,navigator,top,window.crossOriginIsolated);;(e=>{e.addEventListener("astro:before-swap",e=>{let r=document.body.querySelector("iframe[src*='/~partytown/']");if(r)e.newDocument.body.append(r)})})(document);</script></head> <body class="bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 min-h-screen"> <header class="border-b border-gray-200 dark:border-gray-800 bg-white/80 dark:bg-gray-900/80 backdrop-blur-md sticky top-0 z-50"> <nav class="content-container"> <div class="flex items-center justify-between h-16"> <!-- Logo/Brand --> <div class="flex-shrink-0"> <h2 class="text-xl font-semibold text-gray-900 dark:text-gray-100 m-0"> <a href="/" class="hover:text-primary-600 dark:hover:text-primary-400 transition-colors duration-200 no-underline"> Dev Jurnal </a> </h2> </div> <!-- Navigation Links --> <div class="hidden md:block"> <div class="flex items-center space-x-1"> <a href="/" class="nav-link text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100 nav-link"> Home </a> <a href="/blog" class="nav-link text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100 nav-link"> Blog </a> <a href="/gallery" class="nav-link text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100 nav-link"> Gallery </a> <a href="/about" class="nav-link text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100 nav-link"> About </a> <a href="/blog-id" class="nav-link text-gray-900 dark:text-gray-100 font-medium nav-link"> ðŸ‡®ðŸ‡© ID </a> </div> </div> <!-- Social Links --> <div class="flex items-center space-x-4"> <a href="https://github.com/mmdmthr" target="_blank" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors duration-200" aria-label="GitHub"> <span class="sr-only">Go to Hari's GitHub repo</span> <svg class="w-5 h-5" viewBox="0 0 16 16" aria-hidden="true"> <path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path> </svg> </a> </div> <!-- Mobile menu button (for future mobile navigation) --> <div class="md:hidden"> <button type="button" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 p-2" aria-label="Open menu"> <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path> </svg> </button> </div> </div> </nav> </header> <main class="content-container py-8"> <article class="max-w-3xl mx-auto"> <!-- Hero Image (if present) --> <div class="mb-8"> <img src="/blog-placeholder-2.jpg" alt="" class="w-full h-64 sm:h-80 object-cover rounded-xl shadow-lg"> </div> <!-- Article Header --> <header class="mb-8 text-center"> <div class="mb-4"> <time class="text-sm text-gray-500 dark:text-gray-400"> <time datetime="2023-01-28T00:00:00.000Z"> Jan 28, 2023 </time> </time>  </div> <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-gray-900 dark:text-gray-100 leading-tight mb-6"> Mengoptimalkan Query Database di Laravel </h1>  <hr class="w-16 h-0.5 bg-primary-500 border-0 mx-auto mt-6"> </header> <!-- Article Content --> <div class="prose-vitesse">  <h3 id="1-mengambil-data-dalam-jumlah-besar">1. Mengambil Data dalam Jumlah Besar</h3>
<p><strong>Opsi 1: Menggunakan chunk</strong></p>
<p>Jika aplikasi perlu memproses jumlah data yang besar,
kita bisa melakukannya dengan <code>chunk</code> (potongan).
Fungsi <code>chunk</code> menjalankan query dalam potongan-potongan
berdasarkan nilai <em>offset</em> dan <em>limit</em>, ini lebih optimal
dibanding query mengambil semua data di database.
Contoh di bawah mengambil 100 record dari tabel posts,
memprosesnya, mengambil 100 record lagi, dan memprosesnya.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="php"><code><span class="line"><span style="color:#6A737D">// eloquent</span></span>
<span class="line"><span style="color:#E1E4E8">$posts </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> Post</span><span style="color:#F97583">::</span><span style="color:#B392F0">chunk</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">100</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">function</span><span style="color:#E1E4E8">($posts){</span></span>
<span class="line"><span style="color:#F97583">    foreach</span><span style="color:#E1E4E8"> ($posts </span><span style="color:#F97583">as</span><span style="color:#E1E4E8"> $post){</span></span>
<span class="line"><span style="color:#6A737D">     // Proses posts</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// query builder</span></span>
<span class="line"><span style="color:#E1E4E8">$posts </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> DB</span><span style="color:#F97583">::</span><span style="color:#B392F0">table</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'posts'</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">-></span><span style="color:#B392F0">chunk</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">100</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">function</span><span style="color:#E1E4E8"> ($posts){</span></span>
<span class="line"><span style="color:#F97583">    foreach</span><span style="color:#E1E4E8"> ($posts </span><span style="color:#F97583">as</span><span style="color:#E1E4E8"> $post){</span></span>
<span class="line"><span style="color:#6A737D">     // Proses posts</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre>
<p><strong>Opsi 2: Menggunakan chunkById</strong></p>
<p>Kita juga dapat menggunakan <code>chunkById</code>. <code>chunkById</code> menggunakan field id
yang merupakan integer (bilangan bulat), dan kueri menggunakan klausa where,
kueri akan jauh lebih cepat.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="php"><code><span class="line"><span style="color:#6A737D">// eloquent</span></span>
<span class="line"><span style="color:#E1E4E8">$posts </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> Post</span><span style="color:#F97583">::</span><span style="color:#B392F0">chunkById</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">100</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">function</span><span style="color:#E1E4E8">($posts){</span></span>
<span class="line"><span style="color:#F97583">    foreach</span><span style="color:#E1E4E8"> ($posts </span><span style="color:#F97583">as</span><span style="color:#E1E4E8"> $post){</span></span>
<span class="line"><span style="color:#6A737D">     // Proses posts</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// query builder</span></span>
<span class="line"><span style="color:#E1E4E8">$posts </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> DB</span><span style="color:#F97583">::</span><span style="color:#B392F0">table</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'posts'</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">-></span><span style="color:#B392F0">chunkById</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">100</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">function</span><span style="color:#E1E4E8"> ($posts){</span></span>
<span class="line"><span style="color:#F97583">    foreach</span><span style="color:#E1E4E8"> ($posts </span><span style="color:#F97583">as</span><span style="color:#E1E4E8"> $post){</span></span>
<span class="line"><span style="color:#6A737D">     // Proses posts</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre>
<h3 id="2-select-hanya-kolom-yang-dibutuhkan">2. <em>Select</em> hanya kolom yang dibutuhkan</h3>
<p>Gunakan fungsi <code>select</code> dalam kueri untuk memilih hanya kolom tertentu
alih-alih mengambil semua kolom dalam sebuah tabel.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="php"><code><span class="line"><span style="color:#6A737D">// eloquent</span></span>
<span class="line"><span style="color:#E1E4E8">$posts </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> Post</span><span style="color:#F97583">::</span><span style="color:#B392F0">select</span><span style="color:#E1E4E8">([</span><span style="color:#9ECBFF">'id'</span><span style="color:#E1E4E8">,</span><span style="color:#9ECBFF">'title'</span><span style="color:#E1E4E8">])</span><span style="color:#F97583">-></span><span style="color:#B392F0">find</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// query builder</span></span>
<span class="line"><span style="color:#E1E4E8">$posts </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> DB</span><span style="color:#F97583">::</span><span style="color:#B392F0">table</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'posts'</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">            -></span><span style="color:#B392F0">where</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'id'</span><span style="color:#E1E4E8">,</span><span style="color:#9ECBFF">'='</span><span style="color:#E1E4E8">,</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">            -></span><span style="color:#B392F0">select</span><span style="color:#E1E4E8">([</span><span style="color:#9ECBFF">'id'</span><span style="color:#E1E4E8">,</span><span style="color:#9ECBFF">'title'</span><span style="color:#E1E4E8">])</span></span>
<span class="line"><span style="color:#F97583">            -></span><span style="color:#B392F0">first</span><span style="color:#E1E4E8">(); </span></span></code></pre>
<h3 id="3-gunakan-pluck-saat-membutuhkan-hanya-satu-atau-dua-kolom-dari-database">3. Gunakan <code>pluck</code> saat membutuhkan hanya satu atau dua kolom dari database</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="php"><code><span class="line"><span style="color:#6A737D">// eloquent</span></span>
<span class="line"><span style="color:#E1E4E8">$posts </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> Post</span><span style="color:#F97583">::</span><span style="color:#B392F0">pluck</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'title'</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'slug'</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// query builder</span></span>
<span class="line"><span style="color:#E1E4E8">$posts </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> DB</span><span style="color:#F97583">::</span><span style="color:#B392F0">table</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'posts'</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">-></span><span style="color:#B392F0">pluck</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'title'</span><span style="color:#E1E4E8">,</span><span style="color:#9ECBFF">'slug'</span><span style="color:#E1E4E8">);</span></span></code></pre>
<p>Ketika kode di atas dijalankan, ia melakukan hal berikut di belakang layar.</p>
<p>Jalankan <code>select title, slug</code> dari kueri posts di database.
Membuat array dengan title sebagai nilai array dan slug sebagai key array.
Mengembalikan array(format array: [ slug => title, slug => title ])</p>
<p>Untuk mengakses hasilnya</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="php"><code><span class="line"><span style="color:#F97583">foreach</span><span style="color:#E1E4E8"> ($posts </span><span style="color:#F97583">as</span><span style="color:#E1E4E8"> $slug </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> $title){</span></span>
<span class="line"><span style="color:#6A737D">    // $title post</span></span>
<span class="line"><span style="color:#6A737D">    // $slug post</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>Jika ingin mengambil hanya satu kolom</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="php"><code><span class="line"><span style="color:#6A737D">// eloquent</span></span>
<span class="line"><span style="color:#E1E4E8">$posts </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> Post</span><span style="color:#F97583">::</span><span style="color:#B392F0">pluck</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'title'</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// query builder</span></span>
<span class="line"><span style="color:#E1E4E8">$posts </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> DB</span><span style="color:#F97583">::</span><span style="color:#B392F0">table</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'posts'</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">-></span><span style="color:#B392F0">pluck</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'title'</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">foreach</span><span style="color:#E1E4E8"> ($posts </span><span style="color:#F97583">as</span><span style="color:#E1E4E8">  $title){</span></span>
<span class="line"><span style="color:#6A737D">    // $title post</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h3 id="4-hitung-jumlah-baris-menggunakan-kueri-bukan-dari-collection">4. Hitung jumlah baris menggunakan kueri, bukan dari collection</h3>
<p>Dengan menggunakan pendekatan ini, kita dapat langsung menghitung
jumlah total baris pada database itu sendiri.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="php"><code><span class="line"><span style="color:#6A737D">// eloquent</span></span>
<span class="line"><span style="color:#E1E4E8">$posts </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> Post</span><span style="color:#F97583">::</span><span style="color:#B392F0">count</span><span style="color:#E1E4E8">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// query builder</span></span>
<span class="line"><span style="color:#E1E4E8">$posts </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> DB</span><span style="color:#F97583">::</span><span style="color:#B392F0">table</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'posts'</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">-></span><span style="color:#B392F0">count</span><span style="color:#E1E4E8">();</span></span></code></pre>
<h3 id="5-menggunakan-with-dalam-relasi">5. Menggunakan <code>with</code> dalam relasi</h3>
<p>Jika kita menggunakan relasi dalam model eloquent
maka kita harus menggunakan method <code>with</code>.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="php"><code><span class="line"><span style="color:#E1E4E8">$posts </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> Post</span><span style="color:#F97583">::</span><span style="color:#B392F0">with</span><span style="color:#E1E4E8">([</span><span style="color:#9ECBFF">'author'</span><span style="color:#E1E4E8">])</span><span style="color:#F97583">-></span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">();</span></span></code></pre>
<p>Demikian pula, jika kita menggunakan hubungan bersarang maka kita dapat menggunakan ini</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="php"><code><span class="line"><span style="color:#E1E4E8">$posts </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> Post</span><span style="color:#F97583">::</span><span style="color:#B392F0">with</span><span style="color:#E1E4E8">([</span><span style="color:#9ECBFF">'author.team'</span><span style="color:#E1E4E8">])</span><span style="color:#F97583">-></span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">();</span></span></code></pre>
<h3 id="6-jangan-memanggil-relasi-yang-tidak-perlu">6. Jangan memanggil relasi yang tidak perlu</h3>
<p>Jangan panggil relasi jika kita yakin id relasi ada di tabel.</p>
<p>Contoh:
Untuk mendapatkan id penulis dari sebuah posting, biasanya kita lakukan</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="php"><code><span class="line"><span style="color:#E1E4E8">$post </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> Post</span><span style="color:#F97583">::</span><span style="color:#B392F0">findOrFail</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">&#x3C;</span><span style="color:#79B8FF">post</span><span style="color:#79B8FF"> id</span><span style="color:#F97583">></span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">$post</span><span style="color:#F97583">-></span><span style="color:#E1E4E8">author</span><span style="color:#F97583">-></span><span style="color:#E1E4E8">id;</span></span></code></pre>
<p>Sebagai gantinya, kita bisa langsung mendapatkan id penulis dengan melakukan hal berikut.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="php"><code><span class="line"><span style="color:#E1E4E8">$post </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> Post</span><span style="color:#F97583">::</span><span style="color:#B392F0">findOrFail</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">&#x3C;</span><span style="color:#79B8FF">post</span><span style="color:#79B8FF"> id</span><span style="color:#F97583">></span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">$post</span><span style="color:#F97583">-></span><span style="color:#E1E4E8">author_id; </span></span>
<span class="line"><span style="color:#6A737D">// table posts memiliki kolom author_id yang menyimpan id penulis</span></span></code></pre>
<p>Tapi selalu lakukan pengecekan bahwa baris yang dituju ada di tabel penulis
jika direferensikan di tabel posts.</p>
<h3 id="7-tambahkan-indeks-ke-kolom-yang-sering-dikueri">7. Tambahkan indeks ke kolom yang sering dikueri</h3>
<p>Jika kita melakukan query dengan <code>where</code> di sebuah kolom.
Kita bisa menambahkan indeks ke kolom tersebut.
Kueri jauh lebih cepat saat melakukan kueri pada baris dengan kolom indeks.</p>
<h3 id="8-gunakan-simplepaginate-bukan-paginate">8. Gunakan simplePaginate, bukan Paginate</h3>
<p>Paginate Menghasilkan link pagination untuk semua halaman.
Sementara simplePaginate Menghasilkan hanya tautan paginasi berikutnya dan sebelumnya.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="php"><code><span class="line"><span style="color:#6A737D">// Menghasilkan link pagination untuk semua halaman</span></span>
<span class="line"><span style="color:#E1E4E8">$posts </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> Post</span><span style="color:#F97583">::</span><span style="color:#B392F0">paginate</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">20</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// Menghasilkan hanya link pagination next dan previous</span></span>
<span class="line"><span style="color:#E1E4E8">$posts </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> Post</span><span style="color:#F97583">::</span><span style="color:#B392F0">simplePaginate</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">20</span><span style="color:#E1E4E8">);</span></span></code></pre>
<h3 id="9-hindari-penggunaan-wildcard-di-awal-dengan-keyword-like">9. Hindari penggunaan wildcard di awal (dengan keyword LIKE)</h3>
<p>Jika kita mengetahui kata kunci muncul di awal nilai kolom,
kita dapat menjalankan kueri seperti di bawah ini.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#F97583">select</span><span style="color:#E1E4E8"> * from table_name where column like keyword%</span></span>
<span class="line"><span style="color:#6A737D"># bukan %keyword%</span></span></code></pre>
<h3 id="10-hindari-penggunaan-fungsi-sql-pada-klausa-where">10. Hindari penggunaan fungsi SQL pada klausa where</h3>
<p>Cukup gunakan <code>where</code> pada kolom tanggal seperti ini</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="php"><code><span class="line"><span style="color:#6A737D">// Yes</span></span>
<span class="line"><span style="color:#E1E4E8">$posts </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> Post</span><span style="color:#F97583">::</span><span style="color:#B392F0">where</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'created_at'</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'>='</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">now</span><span style="color:#E1E4E8">() )</span><span style="color:#F97583">-></span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// No</span></span>
<span class="line"><span style="color:#E1E4E8">$posts </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> Post</span><span style="color:#F97583">::</span><span style="color:#B392F0">whereDate</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'created_at'</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'>='</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">now</span><span style="color:#E1E4E8">() )</span><span style="color:#F97583">-></span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">();</span></span></code></pre>
<h3 id="11-hindari-menambahkan-terlalu-banyak-kolom-ke-sebuah-tabel">11. Hindari menambahkan terlalu banyak kolom ke sebuah tabel</h3>
<p>Menambahkan terlalu banyak kolom ke tabel akan menambah sebuah record
dan akan memperlambat pemindaian tabel. Saat melakukan kueri <code>select *</code>,
kita akhirnya akan mengambil banyak kolom yang sebenarnya tidak diperlukan.
Dalam situasi itu pemecahan tabel akan membantu.</p>
<h3 id="12-pisahkan-kolom-dengan-tipe-data-teks-ke-dalam-tabelnya-sendiri">12. Pisahkan kolom dengan tipe data teks ke dalam tabelnya sendiri</h3>
<p>Pertimbangkan kasus di mana kita memiliki tabel yang disebut posting
dengan kolom konten yang menyimpan konten posting blog.
Konten untuk posting blog akan sangat besar dan seringkali,
kita memerlukan data ini hanya jika seseorang melihat
posting blog tertentu.</p>
<p>Jadi, memisahkan kolom ini dari tabel posts akan secara drastis
meningkatkan performa kueri saat ada terlalu banyak postingan.</p>
<h3 id="13-cara-yang-lebih-baik-untuk-mengambil-baris-terbaru-dari-sebuah-tabel">13. Cara yang lebih baik untuk mengambil baris terbaru dari sebuah tabel</h3>
<p>Jika menggunakan id dalam bentuk integer atau nilai yang berurutan,
cara yang lebih baik untuk mengambil baris terbaru adalah seperti di bawah ini.
Dibandingkan dengan mengurutkan string (pada field date).</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="php"><code><span class="line"><span style="color:#E1E4E8">$posts </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> Post</span><span style="color:#F97583">::</span><span style="color:#B392F0">latest</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'id'</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">-></span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">();</span></span></code></pre>
<h3 id="14-periksa-dan-optimalkan-kueri">14. Periksa dan optimalkan kueri</h3>
<p>Tidak ada satu solusi universal saat mengoptimalkan kueri di laravel.
Hanya kita yang tahu apa yang dilakukan aplikasi kita,
berapa banyak kueri yang dibuatnya, berapa banyak yang benar-benar digunakan.</p>
<p>Untuk melakukan ini, kita dapat menggunakan</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="php"><code><span class="line"><span style="color:#79B8FF">DB</span><span style="color:#F97583">::</span><span style="color:#B392F0">enableQueryLog</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#B392F0">dd</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">DB</span><span style="color:#F97583">::</span><span style="color:#B392F0">getQueryLog</span><span style="color:#E1E4E8">());</span></span></code></pre>
<ol>
<li><strong>Laravel Debugbar</strong> - Laravel debugbar memiliki tab bernama database
yang akan menampilkan semua kueri yang dijalankan saat kita mengunjungi sebuah halaman.
Kunjungi semua halaman di aplikasi dan lihat kueri yang dijalankan di setiap halaman.</li>
<li><strong>Clockwork</strong> - Clockwork sama dengan laravel debugbar.
Tapi alih-alih memberikan toolbar ke situs web,
itu akan menampilkan informasi debug di <em>developer tools window</em>
atau sebagai UI mandiri dengan mengunjungi <code>appurl/clockwork</code>.</li>
<li><strong>Laravel Telescope</strong> - Setelah Telescope diinstal,
kita dapat mengakses dasbor dengan mengunjungi
<code>appurl/telescope</code>. Di dasbor telescope, buka tab kueri, dan itu akan
menampilkan semua kueri yang dijalankan oleh aplikasi.</li>
</ol>
<p><em><strong>Referensi:</strong></em>
<a href="https://dev.to/readymadecode/how-to-optimize-database-queries-in-laravel-3726">How to Optimize Database Queries in Laravel?</a></p>  </div> </article> </main> <footer class="bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-800 mt-16"> <div class="content-container py-12"> <div class="text-center"> <p class="text-gray-600 dark:text-gray-400 text-sm mb-4">
&copy; 2026 @mmdmthr. All rights reserved.
</p> <div class="flex justify-center items-center space-x-6"> <a href="https://github.com/mmdmthr" target="_blank" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors duration-200" aria-label="GitHub"> <span class="sr-only">Go to Hari's GitHub repo</span> <svg class="w-5 h-5" viewBox="0 0 16 16" aria-hidden="true"> <path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path> </svg> </a> <!-- You can add more social links here --> <!-- RSS Link --> <a href="/rss.xml" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors duration-200" aria-label="RSS Feed"> <span class="sr-only">RSS Feed</span> <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"> <path d="M3.429 2.571c8.571 0 15.429 6.857 15.429 15.429h-4.286c0-6.171-5.057-11.143-11.143-11.143v-4.286zM3.429 9.714c3.714 0 6.857 3.143 6.857 6.857h-4.286c0-1.429-1.143-2.571-2.571-2.571v-4.286zM6.857 15.429c0 1.429-1.143 2.571-2.571 2.571s-2.571-1.143-2.571-2.571 1.143-2.571 2.571-2.571 2.571 1.143 2.571 2.571z"></path> </svg> </a> </div> </div> </div> </footer> </body></html>